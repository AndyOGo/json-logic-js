!(function(n,r){"object"==typeof exports&&"undefined"!=typeof module?module.exports=r():"function"==typeof define&&define.amd?define(r):(n=n||self).jsonLogic=r()})(this,(function(){"use strict";var p=Array.isArray;function r(n){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(n){return typeof n}:function(n){return n&&"function"==typeof Symbol&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n})(n)}function u(n){return (function(n){if(Array.isArray(n)){for(var r=0,t=new Array(n.length);r<n.length;r++)t[r]=n[r];return t}})(n)||(function(n){if(Symbol.iterator in Object(n)||"[object Arguments]"===Object.prototype.toString.call(n))return Array.from(n)})(n)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}function s(n){return"object"===r(n)&&null!==n&&!p(n)&&1===Object.keys(n).length}function h(n){return Object.keys(n)[0]}function n(n,r){var t=void 0===r?null:r,e=this;if(void 0===n||""===n||null===n)return e;for(var o=String(n).split("."),u=0;u<o.length;u++){if(null===e)return t;if(void 0===(e=e[o[u]]))return t}return e}function t(n){for(var r=[],t=arguments.length,e=new Array(1<t?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];for(var u=p(e[0])?e[0]:e,i=0;i<u.length;i++){var f=u[i],a=n({var:f},this);null!==a&&""!==a||r.push(f)}return r}function e(n,r,t){var e=n({missing:t},this);return t.length-e.length>=r?[]:e}function o(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce((function(n,r){return parseFloat(n,10)+parseFloat(r,10)}),0)}function i(n,r){return n/r}function f(n,r){return n%r}function a(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce((function(n,r){return parseFloat(n,10)*parseFloat(r,10)}),1)}function c(n,r){return void 0===r?-n:n-r}function l(n,r){return n==r}function v(n){return(!p(n)||0!==n.length)&&!!n}function g(n){return!v(n)}function y(n,r){return n!=r}function d(n,r){return n===r}function m(n,r){return n!==r}function b(n,r){return!(!r||void 0===r.indexOf)&&-1!==r.indexOf(n)}function w(n,r){return r<n}function A(n,r){return r<=n}function j(n,r,t){return void 0===t?n<r:n<r&&r<t}function E(n,r,t){return void 0===t?n<=r:n<=r&&r<=t}n.op="var",t.withApply=!0,e.op="missing_some",e.withApply=!0,o.op="+",i.op="/",f.op="%",a.op="*",c.op="-",l.op="==",g.op="!",y.op="!=",v.op="!!",d.op="===",m.op="!==",b.op="in",w.op=">",A.op=">=",j.op="<",E.op="<=";var O=Object.freeze({variable:n,missing:t,missingSome:e,add:o,divide:i,modulo:f,multiply:a,substract:c,merge:function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.reduce((function(n,r){return n.concat(r)}),[])},equal:l,not:g,notEqual:y,notnot:v,strictEqual:d,strictNotEqual:m,indexOf:b,log:function(n){return console.log(n),n},method:function(n,r,t){return n[r].apply(n,t)},greater:w,greaterEqual:A,less:j,lessEqual:E,max:function(){return Math.max.apply(Math,arguments)},min:function(){return Math.min.apply(Math,arguments)},cat:function(){for(var n=arguments.length,r=new Array(n),t=0;t<n;t++)r[t]=arguments[t];return r.join("")},substr:function(n,r,t){if(t<0){var e=String(n).substr(r);return e.substr(0,e.length+t)}return String(n).substr(r,t)}});function S(n,r,t){var e;for(e=0;e<t.length-1;e+=2)if(v(n(t[e],r)))return n(t[e+1],r);return t.length===e+1?n(t[e],r):null}function _(n){return n[h(n)]}S.op=["if","?:"];var x=(function(t,e){var c={},l={};function o(n,r){c[n]=r}function u(n,r){p(n)?n.forEach((function(n){return u(n,r)})):l[n]=r}return t&&Object.keys(t).forEach((function(n){var r=t[n];o(r.op||n,r)})),e&&Object.keys(e).forEach((function(n){var r=e[n];u(r.op||n,r)})),{apply:function r(n){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(p(n))return n.map((function(n){return r(n,t)}));if(!s(n))return n;var e,o=h(n),u=n[o];if(p(u)||(u=[u]),"function"==typeof l[o])return l[o](r,t,u);u=u.map((function(n){return r(n,t)}));var i=c[o];if("function"==typeof i)return i.withApply&&u.unshift(r),i.apply(t,u);if(0<o.indexOf(".")){var f=String(o).split("."),a=c;for(e=0;e<f.length;e++)if(void 0===(a=a[f[e]]))throw new Error("Unrecognized operation ".concat(o," (failed at ").concat(f.slice(0,e+1).join("."),")"));return a.apply(t,u)}throw new Error("Unrecognized operation ".concat(o))},add_operation:o,rm_operation:function(n){delete c[n]},add_visitor:u,rm_visitor:function n(r){p(r)?r.forEach(n):delete l[r]}}})(O,Object.freeze({all:function(n,r,t){var e=n(t[0],r),o=t[1];if(!e.length)return!1;for(var u=0;u<e.length;u+=1)if(!v(n(o,e[u])))return!1;return!0},filter:function(r,n,t){var e=r(t[0],n),o=t[1];return p(e)?e.filter((function(n){return v(r(o,n))})):[]},map:function(r,n,t){var e=r(t[0],n),o=t[1];return p(e)?e.map((function(n){return r(o,n)})):[]},none:function(n,r,t){return 0===n({filter:t},r).length},reduce:function(t,n,r){var e=t(r[0],n),o=r[1],u=void 0!==r[2]?r[2]:null;return p(e)?e.reduce((function(n,r){return t(o,{current:r,accumulator:n})}),u):u},some:function(n,r,t){return 0<n({filter:t},r).length},and:function(n,r,t){for(var e,o=0;o<t.length;o++)if(!v(e=n(t[o],r)))return e;return e},condition:S,or:function(n,r,t){for(var e,o=0;o<t.length;o++)if(v(e=n(t[o],r)))return e;return e}}));return x.is_logic=s,x.truthy=v,x.get_operator=h,x.get_values=_,x.uses_data=function r(n){var t=[];if(s(n)){var e=h(n),o=n[e];p(o)||(o=[o]),"var"===e?t.push(o[0]):o.forEach((function(n){t.push.apply(t,u(r(n)))}))}return (function(n){for(var r=[],t=0,e=n.length;t<e;t++)-1===r.indexOf(n[t])&&r.push(n[t]);return r})(t)},x.rule_like=function n(r,t){if(t===r)return!0;if("@"===t)return!0;if("number"===t)return"number"==typeof r;if("string"===t)return"string"==typeof r;if("array"===t)return p(r)&&!s(r);if(s(t)){if(s(r)){var e=h(t),o=h(r);if("@"===e||e===o)return n(_(r),_(t))}return!1}if(p(t)){if(p(r)){if(t.length!==r.length)return!1;for(var u=0;u<t.length;u+=1)if(!n(r[u],t[u]))return!1;return!0}return!1}return!1},x}));
//# sourceMappingURL=jsonLogic.min.js.map
