!(function(r,n){"object"==typeof exports&&"undefined"!=typeof module?module.exports=n():"function"==typeof define&&define.amd?define(n):(r=r||self).jsonLogic=n()})(this,(function(){"use strict";var d=Array.isArray;function n(r){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}function u(r){return (function(r){if(Array.isArray(r)){for(var n=0,t=new Array(r.length);n<r.length;n++)t[n]=r[n];return t}})(r)||(function(r){if(Symbol.iterator in Object(r)||"[object Arguments]"===Object.prototype.toString.call(r))return Array.from(r)})(r)||(function(){throw new TypeError("Invalid attempt to spread non-iterable instance")})()}function s(r){return"object"===n(r)&&null!==r&&!d(r)&&1===Object.keys(r).length}function p(r){return Object.keys(r)[0]}function r(r,n){var t=void 0===n?null:n,e=this;if(void 0===r||""===r||null===r)return e;for(var o=String(r).split("."),u=0;u<o.length;u++){if(null===e)return t;if(void 0===(e=e[o[u]]))return t}return e}function t(r){for(var n=[],t=arguments.length,e=new Array(1<t?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];for(var u=d(e[0])?e[0]:e,i=0;i<u.length;i++){var f=u[i],c=r({var:f},this);null!==c&&""!==c||n.push(f)}return n}function e(r,n,t){var e=r({missing:t},this);return t.length-e.length>=n?[]:e}function o(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return parseFloat(r,10)+parseFloat(n,10)}),0)}function i(r,n){return r/n}function f(r,n){return r%n}function c(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return parseFloat(r,10)*parseFloat(n,10)}),1)}function a(r,n){return void 0===n?-r:r-n}function l(r,n){return r==n}function h(r){return(!d(r)||0!==r.length)&&!!r}function v(r){return!h(r)}function y(r,n){return r!=n}function g(r,n){return r===n}function m(r,n){return r!==n}function b(r,n){return!(!n||void 0===n.indexOf)&&-1!==n.indexOf(r)}function w(r,n){return n<r}function A(r,n){return n<=r}function j(r,n,t){return void 0===t?r<n:r<n&&n<t}function E(r,n,t){return void 0===t?r<=n:r<=n&&n<=t}r.code="var",t.withApply=!0,e.code="missing_some",e.withApply=!0,o.code="+",i.code="/",f.code="%",c.code="*",a.code="-",l.code="==",v.code="!",y.code="!=",g.code="===",m.code="!==",h.code="!!",b.code="in",w.code=">",A.code=">=",j.code="<",E.code="<=";var O=Object.freeze({variable:r,missing:t,missingSome:e,add:o,divide:i,modulo:f,multiply:c,substract:a,merge:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.reduce((function(r,n){return r.concat(n)}),[])},equal:l,falsy:v,notEqual:y,strictEqual:g,strictNotEqual:m,truthy:h,indexOf:b,log:function(r){return console.log(r),r},method:function(r,n,t){return r[n].apply(r,t)},greater:w,greaterEqual:A,lower:j,lowerEqual:E,max:function(){return Math.max.apply(Math,arguments)},min:function(){return Math.min.apply(Math,arguments)},cat:function(){for(var r=arguments.length,n=new Array(r),t=0;t<r;t++)n[t]=arguments[t];return n.join("")},substr:function(r,n,t){if(t<0){var e=String(r).substr(n);return e.substr(0,e.length+t)}return String(r).substr(n,t)}});function S(r,n,t){var e;for(e=0;e<t.length-1;e+=2)if(h(r(t[e],n)))return r(t[e+1],n);return t.length===e+1?r(t[e],n):null}function _(r){return r[p(r)]}S.code=["if","?:"];var x=(function(t,e){var a={},l={};function o(r,n){a[r]=n}function u(r,n){d(r)?r.forEach((function(r){return u(r,n)})):l[r]=n}return t&&Object.keys(t).forEach((function(r){var n=t[r];o(n.code||r,n)})),e&&Object.keys(e).forEach((function(r){var n=e[r];u(n.code||r,n)})),{apply:function n(r){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(d(r))return r.map((function(r){return n(r,t)}));if(!s(r))return r;var e,o=p(r),u=r[o];if(d(u)||(u=[u]),"function"==typeof l[o])return l[o](n,t,u);u=u.map((function(r){return n(r,t)}));var i=a[o];if("function"==typeof i)return i.withApply&&u.unshift(n),i.apply(t,u);if(0<o.indexOf(".")){var f=String(o).split("."),c=a;for(e=0;e<f.length;e++)if(void 0===(c=c[f[e]]))throw new Error("Unrecognized operation ".concat(o," (failed at ").concat(f.slice(0,e+1).join("."),")"));return c.apply(t,u)}throw new Error("Unrecognized operation ".concat(o))},add_operation:o,rm_operation:function(r){delete a[r]},add_visitor:u,rm_visitor:function r(n){d(n)?n.forEach(r):delete l[n]}}})(O,Object.freeze({all:function(r,n,t){var e=r(t[0],n),o=t[1];if(!e.length)return!1;for(var u=0;u<e.length;u+=1)if(!h(r(o,e[u])))return!1;return!0},filter:function(n,r,t){var e=n(t[0],r),o=t[1];return d(e)?e.filter((function(r){return h(n(o,r))})):[]},map:function(n,r,t){var e=n(t[0],r),o=t[1];return d(e)?e.map((function(r){return n(o,r)})):[]},none:function(r,n,t){return 0===r({filter:t},n).length},reduce:function(t,r,n){var e=t(n[0],r),o=n[1],u=void 0!==n[2]?n[2]:null;return d(e)?e.reduce((function(r,n){return t(o,{current:n,accumulator:r})}),u):u},some:function(r,n,t){return 0<r({filter:t},n).length},and:function(r,n,t){for(var e,o=0;o<t.length;o++)if(!h(e=r(t[o],n)))return e;return e},condition:S,or:function(r,n,t){for(var e,o=0;o<t.length;o++)if(h(e=r(t[o],n)))return e;return e}}));return x.is_logic=s,x.truthy=h,x.get_operator=p,x.get_values=_,x.uses_data=function n(r){var t=[];if(s(r)){var e=p(r),o=r[e];d(o)||(o=[o]),"var"===e?t.push(o[0]):o.forEach((function(r){t.push.apply(t,u(n(r)))}))}return (function(r){for(var n=[],t=0,e=r.length;t<e;t++)-1===n.indexOf(r[t])&&n.push(r[t]);return n})(t)},x.rule_like=function r(n,t){if(t===n)return!0;if("@"===t)return!0;if("number"===t)return"number"==typeof n;if("string"===t)return"string"==typeof n;if("array"===t)return d(n)&&!s(n);if(s(t)){if(s(n)){var e=p(t),o=p(n);if("@"===e||e===o)return r(_(n),_(t))}return!1}if(d(t)){if(d(n)){if(t.length!==n.length)return!1;for(var u=0;u<t.length;u+=1)if(!r(n[u],t[u]))return!1;return!0}return!1}return!1},x}));
//# sourceMappingURL=jsonLogic.min.js.map
