[
"Too few args",
[{"if":[]}, null, null],
[{"if":[true]}, null, true],
[{"if":[false]}, null, false],
[{"if":["apple"]}, null, "apple"],

"Simple if/then/else cases",
[{"if":[true, "apple"]}, null, "apple"],
[{"if":[false, "apple"]}, null, null],
[{"if":[true, "apple", "banana"]}, null, "apple"],
[{"if":[false, "apple", "banana"]}, null, "banana"],

"Empty arrays are falsey",
[{"if":[ [], "apple", "banana"]}, null, "banana"],
[{"if":[ [1], "apple", "banana"]}, null, "apple"],
[{"if":[ [1,2,3,4], "apple", "banana"]}, null, "apple"],

"Empty strings are falsey, all other strings are truthy",
[{"if":[ "", "apple", "banana"]}, null, "banana"],
[{"if":[ "zucchini", "apple", "banana"]}, null, "apple"],
[{"if":[ "0", "apple", "banana"]}, null, "apple"],

"You can cast a string to numeric with a unary + ",
[{"===":[0,"0"]}, null, false],
[{"===":[0,{"+":"0"}]}, null, true],
[{"if":[ {"+":"0"}, "apple", "banana"]}, null, "banana"],
[{"if":[ {"+":"1"}, "apple", "banana"]}, null, "apple"],

"Zero is falsy, all other numbers are truthy",
[{"if":[ 0, "apple", "banana"]}, null, "banana"],
[{"if":[ 1, "apple", "banana"]}, null, "apple"],
[{"if":[ 3.1416, "apple", "banana"]}, null, "apple"],
[{"if":[ -1, "apple", "banana"]}, null, "apple"],

"If the conditional is logic, it gets evaluated",
[{"if":[ {">":[2,1]}, "apple", "banana"]}, null, "apple"],
[{"if":[ {">":[1,2]}, "apple", "banana"]}, null, "banana"],

"If the consequents are logic, they get evaluated",
[{"if":[ true, {"cat":["ap","ple"]}, {"cat":["ba","na","na"]} ]}, null, "apple"],
[{"if":[ false, {"cat":["ap","ple"]}, {"cat":["ba","na","na"]} ]}, null, "banana"],

"If/then/elseif/then cases",
[{"if":[true, "apple", true, "banana"]}, null, "apple"],
[{"if":[true, "apple", false, "banana"]}, null, "apple"],
[{"if":[false, "apple", true, "banana"]}, null, "banana"],
[{"if":[false, "apple", false, "banana"]}, null, null],

[{"if":[true, "apple", true, "banana", "carrot"]}, null, "apple"],
[{"if":[true, "apple", false, "banana", "carrot"]}, null, "apple"],
[{"if":[false, "apple", true, "banana", "carrot"]}, null, "banana"],
[{"if":[false, "apple", false, "banana", "carrot"]}, null, "carrot"],

[{"if":[false, "apple", false, "banana", false, "carrot"]}, null, null],
[{"if":[false, "apple", false, "banana", false, "carrot", "date"]}, null, "date"],
[{"if":[false, "apple", false, "banana", true, "carrot", "date"]}, null, "carrot"],
[{"if":[false, "apple", true, "banana", false, "carrot", "date"]}, null, "banana"],
[{"if":[false, "apple", true, "banana", true, "carrot", "date"]}, null, "banana"],
[{"if":[true, "apple", false, "banana", false, "carrot", "date"]}, null, "apple"],
[{"if":[true, "apple", false, "banana", true, "carrot", "date"]}, null, "apple"],
[{"if":[true, "apple", true, "banana", false, "carrot", "date"]}, null, "apple"],
[{"if":[true, "apple", true, "banana", true, "carrot", "date"]}, null, "apple"],

"Missing",
[{"missing":[]}, null, []],
[{"missing":["a"]}, null, ["a"]],
[{"missing":"a"}, null, ["a"]],
[{"missing":"a"}, {"a":"apple"}, []],
[{"missing":["a"]}, {"a":"apple"}, []],
[{"missing":["a","b"]}, {"a":"apple"}, ["b"]],
[{"missing":["a","b"]}, {"b":"banana"}, ["a"]],
[{"missing":["a","b"]}, {"a":"apple", "b":"banana"}, []],
[{"missing":["a","b"]}, {}, ["a","b"]],
[{"missing":["a","b"]}, null, ["a","b"]],

[{"missing":["a.b"]}, null, ["a.b"]],
[{"missing":["a.b"]}, {"a":"apple"}, ["a.b"]],
[{"missing":["a.b"]}, {"a":{"c":"apple cake"}}, ["a.b"]],
[{"missing":["a.b"]}, {"a":{"b":"apple brownie"}}, []],
[{"missing":["a.b", "a.c"]}, {"a":{"b":"apple brownie"}}, ["a.c"]],

"Missing and If are friends, because empty arrays are falsey in JsonLogic",
[{"if":[ {"missing":"a"}, "missed it", "found it" ]}, {"a":"apple"}, "found it"],
[{"if":[ {"missing":"a"}, "missed it", "found it" ]}, {"b":"banana"}, "missed it"],

"Merge arrays",
[{"merge":[]}, null, []],
[{"merge":[[1]]}, null, [1]],
[{"merge":[[1],[]]}, null, [1]],
[{"merge":[[1], [2]]}, null, [1,2]],
[{"merge":[[1], [2], [3]]}, null, [1,2,3]],
[{"merge":[[1, 2], [3]]}, null, [1,2,3]],
[{"merge":[[1], [2, 3]]}, null, [1,2,3]],
"Given non-array arguments, merge converts them to arrays",
[{"merge":1}, null, [1]],
[{"merge":[1,2]}, null, [1,2]],
[{"merge":[1,[2]]}, null, [1,2]],

"Missing, Merge, and If are friends. VIN is always required, APR is only required if financing is true.",
[
	{"missing":{"merge":[ "vin", {"if": [{"var":"financing"}, ["apr"], [] ]} ]} },
	{"financing":true},
	["vin","apr"] 
],

[
	{"missing":{"merge":[ "vin", {"if": [{"var":"financing"}, ["apr"], [] ]} ]} },
	{"financing":false},
	["vin"]
],

"END"
]
